# éƒ¨ç½²æ£€æŸ¥æ¸…å•

## âœ… éƒ¨ç½²å‰æ£€æŸ¥

### 1. ç¯å¢ƒå‡†å¤‡
- [ ] Node.js 18+ å·²å®‰è£…
- [ ] npm å·²å®‰è£…
- [ ] æœåŠ¡å™¨ç«¯å£å¯ç”¨ï¼ˆé»˜è®¤3000ï¼‰
- [ ] ç½‘ç»œå¯è®¿é—®MCPæœåŠ¡

### 2. APIå¯†é’¥å‡†å¤‡
- [ ] DeepSeek API Keyï¼ˆå¿…éœ€ï¼‰
  - è·å–åœ°å€ï¼šhttps://platform.deepseek.com/
  - æ ¼å¼ï¼š`sk-xxxxxxxx`
- [ ] åƒé—® API Keyï¼ˆå¯é€‰ï¼‰
  - è·å–åœ°å€ï¼šhttps://dashscope.aliyun.com/
  - æ ¼å¼ï¼š`sk-xxxxxxxx`

### 3. æ–‡ä»¶å®Œæ•´æ€§
- [ ] `src/server.js` å­˜åœ¨
- [ ] `src/config/index.js` å­˜åœ¨
- [ ] `src/models/AIProvider.js` å­˜åœ¨
- [ ] `src/services/ChatService.js` å­˜åœ¨
- [ ] `src/services/MCPService.js` å­˜åœ¨
- [ ] `src/services/StorageService.js` å­˜åœ¨
- [ ] `public/index.html` å­˜åœ¨
- [ ] `public/styles.css` å­˜åœ¨
- [ ] `public/app.js` å­˜åœ¨
- [ ] `package.json` å­˜åœ¨
- [ ] `deploy.sh` å­˜åœ¨ä¸”å¯æ‰§è¡Œ

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd analysis-crypto-trade-web

# 2. è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh

# 3. æŒ‰æç¤ºè¾“å…¥é…ç½®
# - DeepSeek API Key
# - åƒé—® API Keyï¼ˆå¯é€‰ï¼‰
# - ç«¯å£å·ï¼ˆé»˜è®¤3000ï¼‰
# - å†å²è®°å½•ä¿ç•™å¤©æ•°ï¼ˆé»˜è®¤30ï¼‰

# 4. ç­‰å¾…éƒ¨ç½²å®Œæˆ
# è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
# - æ£€æŸ¥ç¯å¢ƒ
# - åˆ›å»º.envæ–‡ä»¶
# - å®‰è£…ä¾èµ–
# - é…ç½®PM2
# - å¯åŠ¨æœåŠ¡
# - å¥åº·æ£€æŸ¥
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. å®‰è£…ä¾èµ–
npm install --production

# 2. åˆ›å»ºç¯å¢ƒé…ç½®
cp .env.example .env
nano .env  # ç¼–è¾‘å¡«å…¥APIå¯†é’¥

# 3. åˆ›å»ºå­˜å‚¨ç›®å½•
mkdir -p storage/chats logs

# 4. å®‰è£…PM2ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g pm2

# 5. å¯åŠ¨æœåŠ¡
pm2 start src/server.js --name crypto-ai-analyzer

# 6. ä¿å­˜PM2é…ç½®
pm2 save

# 7. è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
```

## âœ… éƒ¨ç½²åéªŒè¯

### 1. æœåŠ¡çŠ¶æ€æ£€æŸ¥
```bash
# æŸ¥çœ‹PM2çŠ¶æ€
pm2 status

# åº”è¯¥çœ‹åˆ°ï¼š
# â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ id  â”‚ name               â”‚ status  â”‚ restart â”‚
# â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ 0   â”‚ crypto-ai-analyzer â”‚ online  â”‚ 0       â”‚
# â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å¥åº·æ£€æŸ¥
```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl http://localhost:3000/health

# åº”è¯¥è¿”å›ï¼š
# {
#   "status": "ok",
#   "timestamp": "2024-01-20T...",
#   "models": ["deepseek", "qwen"]
# }
```

### 3. æ—¥å¿—æ£€æŸ¥
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs crypto-ai-analyzer --lines 20

# åº”è¯¥çœ‹åˆ°ï¼š
# ğŸš€ Crypto AI Analyzer running on port 3000
# ğŸ“Š Available models: deepseek, qwen
# ğŸ”— Open http://localhost:3000
```

### 4. æµè§ˆå™¨è®¿é—®
- [ ] æ‰“å¼€ `http://localhost:3000`
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æ¬¢è¿æ¶ˆæ¯æ˜¾ç¤º
- [ ] å¿«æ·æŒ‰é’®å¯ç‚¹å‡»
- [ ] æ¨¡å‹é€‰æ‹©å™¨æ˜¾ç¤ºæ­£ç¡®

### 5. åŠŸèƒ½æµ‹è¯•
- [ ] å‘é€æµ‹è¯•æ¶ˆæ¯ï¼š"ä½ å¥½"
- [ ] AIæ­£å¸¸å›å¤
- [ ] å†å²è®°å½•ä¿å­˜
- [ ] æ¨¡å‹åˆ‡æ¢æ­£å¸¸
- [ ] æ–°å»ºå¯¹è¯åŠŸèƒ½æ­£å¸¸

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæœåŠ¡æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼šPM2æ˜¾ç¤ºçŠ¶æ€ä¸º`errored`æˆ–`stopped`

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs crypto-ai-analyzer --err

# 2. æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000

# 3. æ£€æŸ¥.envæ–‡ä»¶
cat .env

# 4. æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•
node src/server.js
```

**å¸¸è§åŸå› **ï¼š
- ç«¯å£è¢«å ç”¨
- .envæ–‡ä»¶ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯
- APIå¯†é’¥æ— æ•ˆ
- Node.jsç‰ˆæœ¬è¿‡ä½

### é—®é¢˜2ï¼šAIæ— å“åº”

**ç—‡çŠ¶**ï¼šå‘é€æ¶ˆæ¯åä¸€ç›´åŠ è½½ï¼Œæ— å›å¤

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥APIå¯†é’¥
grep DEEPSEEK_API_KEY .env

# 2. æµ‹è¯•ç½‘ç»œè¿æ¥
curl https://api.deepseek.com

# 3. æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs crypto-ai-analyzer
```

**å¸¸è§åŸå› **ï¼š
- APIå¯†é’¥é”™è¯¯æˆ–è¿‡æœŸ
- ç½‘ç»œæ— æ³•è®¿é—®AIæœåŠ¡
- APIé…é¢ç”¨å°½

### é—®é¢˜3ï¼šMCPæ•°æ®è·å–å¤±è´¥

**ç—‡çŠ¶**ï¼šAIå›å¤ä¸­æç¤º"æ•°æ®è·å–å¤±è´¥"

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æµ‹è¯•MCPæœåŠ¡è¿é€šæ€§
curl https://BASE_DOMAIN/mcp

# 2. æ£€æŸ¥MCPé…ç½®
grep MCP_ .env

# 3. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
pm2 logs crypto-ai-analyzer --lines 50
```

**å¸¸è§åŸå› **ï¼š
- MCPæœåŠ¡ä¸å¯è®¿é—®
- ç½‘ç»œé˜²ç«å¢™é™åˆ¶
- MCPæœåŠ¡ä¸´æ—¶æ•…éšœ

### é—®é¢˜4ï¼šå†å²è®°å½•ä¸ä¿å­˜

**ç—‡çŠ¶**ï¼šåˆ·æ–°é¡µé¢åå¯¹è¯æ¶ˆå¤±

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥å­˜å‚¨ç›®å½•æƒé™
ls -la storage/chats/

# 2. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# 3. æ‰‹åŠ¨æµ‹è¯•å†™å…¥
touch storage/chats/test.txt
```

**å¸¸è§åŸå› **ï¼š
- å­˜å‚¨ç›®å½•æƒé™ä¸è¶³
- ç£ç›˜ç©ºé—´ä¸è¶³
- æ–‡ä»¶ç³»ç»Ÿåªè¯»

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥

### 1. å†…å­˜ä½¿ç”¨
```bash
# æŸ¥çœ‹å†…å­˜å ç”¨
pm2 status

# å¦‚æœå†…å­˜è¿‡é«˜ï¼Œè°ƒæ•´é…ç½®
# ç¼–è¾‘ ecosystem.config.cjs
# max_memory_restart: '300M'
```

### 2. å“åº”æ—¶é—´
```bash
# æµ‹è¯•APIå“åº”æ—¶é—´
time curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"æµ‹è¯•"}'

# æ­£å¸¸åº”è¯¥åœ¨3ç§’å†…è¿”å›
```

### 3. æ—¥å¿—å¤§å°
```bash
# æ£€æŸ¥æ—¥å¿—å¤§å°
du -sh logs/

# å¦‚æœè¿‡å¤§ï¼Œæ¸…ç†æ—§æ—¥å¿—
pm2 flush
```

## ğŸ”’ å®‰å…¨æ£€æŸ¥

### 1. ç¯å¢ƒå˜é‡ä¿æŠ¤
- [ ] `.env` æ–‡ä»¶ä¸åœ¨Gitä»“åº“ä¸­
- [ ] `.env` æ–‡ä»¶æƒé™è®¾ç½®ä¸º600
- [ ] APIå¯†é’¥æœªç¡¬ç¼–ç åœ¨ä»£ç ä¸­

```bash
# è®¾ç½®.envæ–‡ä»¶æƒé™
chmod 600 .env

# éªŒè¯.gitignore
cat .gitignore | grep .env
```

### 2. ç«¯å£å®‰å…¨
- [ ] ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Nginxåå‘ä»£ç†
- [ ] é…ç½®HTTPSï¼ˆæ¨èï¼‰
- [ ] è®¾ç½®é˜²ç«å¢™è§„åˆ™

### 3. æ•°æ®å®‰å…¨
- [ ] å®šæœŸå¤‡ä»½`storage/`ç›®å½•
- [ ] è®¾ç½®åˆç†çš„å†å²è®°å½•ä¿ç•™æ—¶é—´
- [ ] ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µ

## ğŸ“± ç§»åŠ¨ç«¯æµ‹è¯•

### 1. å“åº”å¼å¸ƒå±€
- [ ] åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­æ‰“å¼€
- [ ] ä¾§è¾¹æ å¯æ­£å¸¸å±•å¼€/æ”¶èµ·
- [ ] è¾“å…¥æ¡†ä¸è¢«é”®ç›˜é®æŒ¡
- [ ] æŒ‰é’®å¤§å°é€‚åˆè§¦æ‘¸

### 2. æ‰‹åŠ¿æ“ä½œ
- [ ] å³æ»‘æ‰“å¼€ä¾§è¾¹æ 
- [ ] å·¦æ»‘å…³é—­ä¾§è¾¹æ 
- [ ] ç‚¹å‡»å¤–éƒ¨å…³é—­ä¾§è¾¹æ 

### 3. æ€§èƒ½æµ‹è¯•
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦æ­£å¸¸
- [ ] æ»šåŠ¨æµç•…æ— å¡é¡¿
- [ ] æ¶ˆæ¯å‘é€å“åº”åŠæ—¶

## ğŸ¯ ç”Ÿäº§ç¯å¢ƒé¢å¤–é…ç½®

### 1. Nginxåå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### 2. SSLè¯ä¹¦é…ç½®
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

### 3. é˜²ç«å¢™é…ç½®
```bash
# å…è®¸HTTP/HTTPS
sudo ufw allow 80
sudo ufw allow 443

# å¦‚æœéœ€è¦ç›´æ¥è®¿é—®åº”ç”¨ç«¯å£
sudo ufw allow 3000

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable
```

### 4. ç›‘æ§å‘Šè­¦
```bash
# å®‰è£…ç›‘æ§å·¥å…·ï¼ˆå¯é€‰ï¼‰
npm install -g pm2-logrotate

# é…ç½®æ—¥å¿—è½®è½¬
pm2 install pm2-logrotate
pm2 set pm2-logrotate:max_size 10M
pm2 set pm2-logrotate:retain 7
```

## âœ… æœ€ç»ˆæ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®ï¼š

- [ ] æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆPM2çŠ¶æ€ä¸ºonlineï¼‰
- [ ] å¥åº·æ£€æŸ¥æ¥å£è¿”å›æ­£å¸¸
- [ ] æµè§ˆå™¨å¯ä»¥è®¿é—®åº”ç”¨
- [ ] AIå¯¹è¯åŠŸèƒ½æ­£å¸¸
- [ ] å†å²è®°å½•ä¿å­˜æ­£å¸¸
- [ ] æ¨¡å‹åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯è®¿é—®æ­£å¸¸
- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º
- [ ] å¼€æœºè‡ªå¯å·²é…ç½®
- [ ] å¤‡ä»½ç­–ç•¥å·²è®¾ç½®

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ–‡æ¡£ï¼š
   - `README.md` - å®Œæ•´æ–‡æ¡£
   - `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹
   - `PROJECT_OVERVIEW.md` - é¡¹ç›®æ€»è§ˆ

2. æ£€æŸ¥æ—¥å¿—ï¼š
   ```bash
   pm2 logs crypto-ai-analyzer
   ```

3. è¿è¡Œè¯Šæ–­ï¼š
   ```bash
   ./test-setup.sh
   ```

4. æäº¤Issueï¼š
   - æè¿°é—®é¢˜
   - é™„ä¸Šæ—¥å¿—
   - è¯´æ˜ç¯å¢ƒä¿¡æ¯

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€
